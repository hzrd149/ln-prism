<h1><%- split.address %></h1>
<a href="/split/<%- split.name %>" class="button">View public page</a>
<a class="button button-outline" href="/admin/split/<%- split.id %>/edit">Edit</a>

<% let percentages = split.getSplitPercentages() %>
<table style="white-space: nowrap">
  <thead>
    <tr>
      <th>Type</th>
      <th>Name</th>
      <th>ID</th>
      <th>Percent</th>
      <th>Fee</th>
      <th>Comments</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% for ( let target of split.targets ) { %>
    <tr>
      <td><%- target.type %></td>
      <td><%- include("../../components/target-name", { target }) %></td>
      <td><abbr title="<%- target.input %>">ID</abbr></td>
      <td><%- include('../../components/target-percent', { target, percentages }) %></td>
      <td><%- msatsToSats(target.getEstimatedFee(), true) %></td>
      <td><%- target.forwardComment ? 'Yes' : 'No' %></td>
      <td>
        <a href="<%- path %>/<%- target.id %>/edit" class="button button-outline button-icon mb-0">📝</a>
        <a class="button button-outline button-icon mb-0" href="<%- path %>/<%- target.id %>/pending" title="Pending"
          >⌛</a
        >
        <a class="button button-outline button-icon mb-0" href="<%- path %>/<%- target.id %>/history" title="History"
          >🕐</a
        >
        <a href="<%- path %>/<%- target.id %>/remove" class="button button-outline button-icon button-red mb-0">🗑</a>
      </td>
    </tr>
    <% } %>
  </tbody>
</table>

<a href="<%- path %>/add" class="button">Add payout</a>
<a href="<%- path %>/pending" class="button button-outline">View pending</a>
<a href="<%- path %>/history" class="button button-outline">View history</a>

<%- include('../../components/split-flow-chart', { split }) %>

<div class="h-stack flex-wrap">
  <div style="flex: 1 0">
    <h3>LNURL</h3>
    <%- include('../../components/split-lnurl-qr', { split }) %>
  </div>
  <div style="flex: 1 0">
    <h3>LN Address</h3>
    <%- include('../../components/split-ln-address-qr', { split }) %>
  </div>
  <% if (split.enableNostrProfile) { %>
  <div style="flex: 1 0">
    <h3>Nostr</h3>
    <%- include('../../components/split-nostr-qr', { split }) %>
  </div>
  <% } %>
</div>

<table style="white-space: nowrap">
  <thead>
    <tr>
      <th>Id Type</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>LN Address</td>
      <td><code><%- split.address %></code></td>
    </tr>
    <tr>
      <td>LNURL</td>
      <td><code><%- split.lnurlp %></code></td>
    </tr>
    <tr>
      <td>API Key</td>
      <td><code><%- split.apiKey %></code></td>
    </tr>
    <% if (split.enableNostrProfile) { %>
    <tr>
      <td>Nostr npub</td>
      <td><code><%- split.npub %></code></td>
    </tr>
    <tr>
      <td>Nostr nsec</td>
      <td><code><%- split.nsec %></code></td>
    </tr>
    <% } %>
  </tbody>
</table>

<a class="button button-outline button-red" href="/admin/split/<%- split.id %>/delete"> Delete split </a>
